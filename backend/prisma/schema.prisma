datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id          Int     @default(autoincrement()) @id
  email       String? @unique
  username    String  @unique
  password	  String
  avatar      String?

  userStatus  String  // online | in-game | offline
  Games		  Game[]  @relation("Game")
  userStats	  Stats?

  createdAt   DateTime @default(now())
  updatedAt	  DateTime @updatedAt
}

model Stats {
	id		Int @id @default(autoincrement())
	
	achievements Achievements[]

	wins	Int @default(0)
	losses	Int @default(0)
	rank 	String	// Unranked, Bronze, Silver, Gold, Platinum, Diamond
	
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt

  	user   User @relation(fields: [userId], references: [id])
 	userId Int  @unique
}

model Achievements {
	id		Int @id @default(autoincrement())

	user	Stats @relation(fields: [userId], references: [id])
	userId	Int

	name	String
	desc	String
	icon	String

	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
}

model Game {
	id		Int @id @default(autoincrement())
	
	outcome String? @default("Undefined") // Win | Loss

	p1Score	Int		@default(0)
	p2Score	Int 	@default(0)

	p2Id	Int

	gameType String? @default("Undefined")

	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt

	user	User @relation("Game", fields: [userId], references: [id])
	userId Int
}